<!DOCTYPE web-app PUBLIC
        "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>Outliner</display-name>
    <servlet>
        <servlet-name>JAXRS</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>

            <param-name>javax.ws.rs.Application</param-name>
            <param-value>edu.northwestern.art.content_core.services.Outliner</param-value>
            <!--
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>edu.northwestern.art.sync_service</param-value>
            -->
        </init-param>
        <init-param>
            <param-name>repositoryurl</param-name>
            <param-value>http://localhost:4004/category_marker/rmi</param-value>
        </init-param>
        <init-param>
            <param-name>username</param-name>
            <param-value>admin</param-value>
        </init-param>
        <init-param>
            <param-name>password</param-name>
            <param-value>kx3w+3j1_3n</param-value>
        </init-param>
    </servlet>

    <servlet>
      <servlet-name>XTFURL</servlet-name>
      <servlet-class>edu.northwestern.art.jcr_access.services.XTFURLService</servlet-class>
    </servlet>

    <servlet>
      <servlet-name>Key</servlet-name>
      <servlet-class>edu.northwestern.art.jcr_access.services.auth.KeyService</servlet-class>
    </servlet>


    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Webdav</servlet-name>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
        <servlet-class>edu.northwestern.art.jcr_access.services.WebdavService</servlet-class>

        <init-param>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
        </init-param>
        <!--
         <init-param>
             <param-name>missing-auth-mapping</param-name>
             <param-value>anonymous:anonymous</param-value>
             <description>
                 Defines how a missing authorization header should be handled.
                 1) If this init-param is missing, a 401 response is generated.
                    This is suiteable for clients (eg. webdav clients) for which
                    sending a proper authorization header is not possible if the
                    server never sent a 401.
                 2) If this init-param is present with an empty value,
                    null-credentials are returned, thus forcing an null login
                    on the repository.
                 3) If this init-param is present with the value 'guestcredentials'
                    java.jcr.GuestCredentials are used to login to the repository.
                 4) If this init-param has a 'user:password' value, the respective
                    simple credentials are generated.
             </description>
         </init-param>
         -->
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/config.xml</param-value>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R M I   B I N D I N G   S E R V L E T                                  -->
    <!-- ====================================================================== -->
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>


    <!--
    <servlet-mapping>
        <servlet-name>RepositoryStartup</servlet-name>
        <url-pattern>/admin/*</url-pattern>
    </servlet-mapping>
    -->

    <servlet-mapping>
      <servlet-name>Webdav</servlet-name>
      <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
      <servlet-name>JAXRS</servlet-name>
      <url-pattern>/service/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
      <servlet-name>Key</servlet-name>
      <url-pattern>/key/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
      <servlet-name>XTFURL</servlet-name>
      <url-pattern>/xtfurl/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>RMI</servlet-name>
        <url-pattern>/rmi</url-pattern>
    </servlet-mapping>

    <resource-env-ref>
      <description>Content Repository</description>
      <resource-env-ref-name>jcr/repository</resource-env-ref-name>
      <resource-env-ref-type>javax.jcr.Repository</resource-env-ref-type>
    </resource-env-ref>

</web-app>
